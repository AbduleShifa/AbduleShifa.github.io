<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!--<meta name=description content="This site was generated with Anima. www.animaapp.com"/>-->
    <!-- <link rel="shortcut icon" type=image/png href="https://animaproject.s3.amazonaws.com/home/favicon.png" /> -->
    <meta name="viewport" content="width=1280, maximum-scale=1.0" />
    <link
      rel="shortcut icon"
      type="image/png"
      href="https://animaproject.s3.amazonaws.com/home/favicon.png"
    />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link rel="stylesheet" type="text/css" href="styleguide.css" />
    <link rel="stylesheet" type="text/css" href="globals.css" />
  </head>
  <body style="margin: 0; background: #ffffff">
    <input type="hidden" id="anPageName" name="page" value="index" />
    <div class="container-center-horizontal">
      <div class="index screen">
        <div class="second-tab">
          <div class="overlap-group2">
            <div class="rectangle-30"></div>
            <div class="icon-plus-text">
              <div class="shifa-chatbot-icon">
                <img
                  class="ellipse-1"
                  src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                  anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/ellipse-1@2x.png"
                  alt="Ellipse 1"
                />
              </div>
              <h1 class="title">Shifa Policy Bot</h1>
            </div>
            <img
              class="rectangle-27"
              src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
              anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/rectangle-27@2x.png"
              alt="Rectangle 27"
            />
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-col">
            <div class="side-bar">
              <img
                class="shifa-chatbot"
                src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/shifa-chatbot@2x.png"
                alt="Shifa Chatbot"
              />
              <div class="shifa-policy-bot">Shifa Policy Bot</div>
              <div class="overlap-group1">
                <div class="hello">Hello!</div>
                <img
                  class="phsmiley-bold"
                  src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                  anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/ph-smiley-bold.svg"
                  alt="ph:smiley-bold"
                />
              </div>
              <div class="overlap-group">
                <p class="how-can-i-help-you">How can I help you?</p>
              </div>
            </div>
            <img
              class="social-media"
              src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
              anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/social-media@2x.png"
              alt="Social Media"
            />
          </div>
          <img
            class="line-1"
            src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
            anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/line-1.svg"
            alt="Line 1"
          />
          <div class="flex-col-1">
            <div class="overlap-group4">
              <div class="rectangle-21"></div>
              <img
                class="rectangle-22"
                src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/rectangle-22.svg"
                alt="Rectangle 22"
              />
              <!-- <p class="ask-anything-you-want">Ask anything you want !</p> -->
              <input
                class="ask-anything-you-want"
                type="text"
                title="Starting Phrase"
                id="phrase"
                placeholder="Ask anything you want !"
              />
              <p class="ask-your-questions-a">
                <span class="span1"
                  >Ask your questions about </span
                ><span class="span1">SHIFA</span
                ><span class="span1">
                  policies !</span
                >
              </p>
              <div class="overlap-group-1 overlap-group-3">
                <div class="submit">
                  <button id="run" class="submit-btn">Submit</button>
                </div>
              </div>
            </div>
            <div class="overlap-group3">
              <div class="loader">
                <div class="loading"></div>
              </div>
              <div class="rectangle-23"></div>
              <img
                class="rectangle-24"
                src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
                anima-src="https://anima-uploads.s3.amazonaws.com/projects/640315e6c9953e0846498536/releases/64f6d92f34117e376ca18b67/img/rectangle-24.svg"
                alt="Rectangle 24"
              />
              <div class="answer-to-the-query">
                <div class="clear">
                  <span class="span1"> Answer To The Query:</span>
                  <button class="clear-btn" onclick="ClearFields();">
                    Clear
                  </button>
                </div>
              </div>
              <!-- <div class="overlap-group-2 overlap-group-3">
                <div class="clear">
                  <button class="submit-btn" onclick="ClearFields();">
                    Clear
                  </button>
                </div>
              </div> -->
              <div class="answer">
                Answer:
                <p id="prompt-holder"></p>
              </div>
            </div>
            <p class="x2023-shifa-interna">
              Â© 2023 Shifa International Hospitals, Ltd., Islamabad Pakistan.
              All Rights Reserved.
            </p>
          </div>
        </div>
      </div>
    </div>
    <script>
      function spinner() {
        document.getElementsByClassName("loader")[0].style.display = "block";
      }
      function hideSpinner() {
        document.getElementsByClassName("loader")[0].style.display = "none";
      }
      isHidden = function (e) {
        if (!(e instanceof HTMLElement)) return false;
        if (getComputedStyle(e).display == "none") return true;
        else if (e.parentNode && isHidden(e.parentNode)) return true;
        return false;
      };
      function ClearFields() {
        let results;

        results = document.getElementById("prompt-holder");
        document.getElementById("phrase").value = "";
        results.firstChild.data = "";
      }
      loadAsyncSrcForTag = function (tag) {
        var elements = document.getElementsByTagName(tag);
        var toLoad = [];
        for (var i = 0; i < elements.length; i++) {
          var e = elements[i];
          var src = e.getAttribute("src");
          var loaded =
            src != undefined &&
            src.length > 0 &&
            src !=
              "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
          if (loaded) continue;
          var asyncSrc = e.getAttribute("anima-src");
          if (asyncSrc == undefined || asyncSrc.length == 0) continue;
          if (isHidden(e)) continue;
          toLoad.push(e);
        }
        // Top first
        toLoad.sort(function (a, b) {
          return getTop(a) - getTop(b);
        });
        for (var i = 0; i < toLoad.length; i++) {
          var e = toLoad[i];
          var asyncSrc = e.getAttribute("anima-src");
          e.setAttribute("src", asyncSrc);
        }
      };

      pauseHiddenVideos = function (tag) {
        var elements = document.getElementsByTagName("video");
        for (var i = 0; i < elements.length; i++) {
          var e = elements[i];
          var isPlaying = !!(
            e.currentTime > 0 &&
            !e.paused &&
            !e.ended &&
            e.readyState > 2
          );
          var isHiddenStatus = isHidden(e);
          if (
            !isPlaying &&
            !isHiddenStatus &&
            e.getAttribute("autoplay") == "autoplay"
          ) {
            e.play();
          } else if (isPlaying && isHiddenStatus) {
            e.pause();
          }
        }
      };

      loadAsyncSrc = function (tag) {
        loadAsyncSrcForTag("img");
        loadAsyncSrcForTag("iframe");
        loadAsyncSrcForTag("video");
        pauseHiddenVideos();
      };

      var getTop = function (e) {
        var top = 0;
        do {
          top += e.offsetTop || 0;
          e = e.offsetParent;
        } while (e);
        return top;
      };

      // On load
      loadAsyncSrc();

      // On resize
      old_onResize = window.onresize;
      new_onResize = undefined;

      updateOnResize = function () {
        if (new_onResize == undefined || window.onresize != new_onResize) {
          new_onResize = function (x) {
            if (old_onResize != undefined) old_onResize(x);
            loadAsyncSrc();
          };
          window.onresize = new_onResize;
          // Make sure not overriden
          setTimeout(function () {
            updateOnResize();
          }, 3000);
        }
      };
      updateOnResize();

      // IE
      setTimeout(function () {
        loadAsyncSrc();
      }, 200);
    </script>
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@gradio/client@0.1.4/dist/index.min.js"
    ></script>
    <script type="module">
      import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client@0.1.4/dist/index.min.js";
      const inputText = document.getElementById("phrase");
      const generate = document.getElementById("run");
      const prompt_holder = document.getElementById("prompt-holder");

      generate.addEventListener("click", async () => {
        const button = document.getElementById("run");
        button.innerHTML = "Submitting..";
        button.setAttribute("disabled", "disabled");
        spinner();
        try {
          const textInput = inputText.value;

          const app = await client("https://moon41220-shifa.hf.space/");
          const result = await app.predict("/predict", [
            textInput, // string  in 'prompt' Textbox component
          ]);
          prompt_holder.textContent = result.data;
          button.removeAttribute("disabled");
          button.innerHTML = "Submit";
          hideSpinner();
        } catch (error) {
          console.log("Error:", error.message);
          button.removeAttribute("disabled");
          button.innerHTML = "Submit";
          hideSpinner();
        }
      });
    </script>
  </body>
</html>
